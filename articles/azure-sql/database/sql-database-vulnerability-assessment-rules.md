---
title: Guida di riferimento alle regole di valutazione della vulnerabilità SQL
description: Elenco di titoli e descrizioni delle regole per SQL Server, database SQL di Azure, Azure SQL Istanza gestita e Azure sinapsi Analytics
services: sql-database
ms.service: sql-db-mi
ms.subservice: security
ms.topic: reference
author: davidtrigano
ms.author: datrigan
ms.reviewer: vanto
ms.date: 03/17/2021
ms.openlocfilehash: fc5558f9f75ada78d1d4946c0e7b61ad8618629f
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/30/2021
ms.locfileid: "104597692"
---
# <a name="sql-vulnerability-assessment-rules-reference-guide"></a>Guida di riferimento alle regole di valutazione della vulnerabilità SQL
[!INCLUDE[appliesto-sqldb-sqlmi-asa](../includes/appliesto-sqldb-sqlmi-asa.md)]

Questo articolo elenca il set di regole predefinite che vengono usate per contrassegnare le vulnerabilità della sicurezza e evidenziare le deviazioni dalle procedure consigliate, ad esempio configurazioni errate, autorizzazioni eccessive e dati sensibili non protetti. Le regole sono basate sulle procedure consigliate di Microsoft e si concentrano sui problemi di sicurezza che presentano i maggiori rischi per il database e i relativi dati importanti. Comprendono problemi a livello di database e problemi di sicurezza a livello di server, ad esempio le impostazioni del firewall del server e le autorizzazioni a livello di server. Queste regole rappresentano anche molti dei requisiti specificati da vari organismi normativi per soddisfare i relativi standard di conformità.

Le regole visualizzate nelle analisi del database dipendono dalla versione e dalla piattaforma SQL analizzate. 

Per informazioni su come implementare la valutazione della vulnerabilità in Azure, vedere [implementare la valutazione della vulnerabilità](./sql-vulnerability-assessment.md#configure-vulnerability-assessment).

Per un elenco delle modifiche apportate a queste regole, vedere [le regole di valutazione della vulnerabilità di SQL](sql-database-vulnerability-assessment-rules-changelog.md).

## <a name="rule-categories"></a>Categorie di regole

Le regole di valutazione della vulnerabilità SQL hanno cinque categorie, incluse nelle sezioni seguenti:

- [Autenticazione e autorizzazione](#authentication-and-authorization)
- [Controllo e registrazione](#auditing-and-logging)
- [Protezione dei dati](#data-protection)
- [Aggiornamenti e patch per l'installazione](#installation-updates-and-patches)
- [Riduzione superficie di attacco](#surface-area-reduction)

<sup>1</sup> **SQL Server 2012 +** fa riferimento a tutte le versioni di SQL Server 2012 e versioni successive.

<sup>2</sup> **SQL Server 2017 +** si riferisce a tutte le versioni di SQL Server 2017 e versioni successive.

<sup>3</sup> **SQL Server 2016 +** si riferisce a tutte le versioni di SQL Server 2016 e versioni successive.

## <a name="authentication-and-authorization"></a>Autenticazione e autorizzazione

|ID regola  |Titolo regola   |Gravità della regola  |Descrizione della regola  |Piattaforma  |
|---------|---------|---------|---------|---------|
| VA1017     |È necessario revocare le autorizzazioni Execute per xp_cmdshell da tutti gli utenti (eccetto dbo)          |Alto         |Il xp_cmdshell stored procedure esteso genera una shell dei comandi di Windows, passando una stringa per l'esecuzione. Questa regola consente di controllare che nessun utente, ad eccezione degli utenti che dispongono dell'autorizzazione CONTROL SERVER, come i membri del ruolo del server sysadmin, disponga dell'autorizzazione per eseguire il xp_cmdshell stored procedure esteso.         |<nobr>SQL Server 2012 +<sup>1</sup><nobr/>         |
|VA1020     |Il GUEST utente del database non deve essere un membro di un ruolo          |Alto         |L'utente Guest consente l'accesso a un database per tutti gli account di accesso di cui non è stato eseguito il mapping a un utente di database specifico. Questa regola consente di verificare che all'utente Guest non siano assegnati ruoli del database.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Database SQL                  |
|VA1042     |Il concatenamento della proprietà del database deve essere disabilitato per tutti i database, ad eccezione di `master` , `msdb` e `tempdb`          |Alto         |Il concatenamento della proprietà tra database è un'estensione del concatenamento della proprietà, ad eccezione del fatto che supera il limite del database. Questa regola controlla che questa opzione sia disabilitata per tutti i database, ad eccezione di `master` , `msdb` e `tempdb` . Per `master` , `msdb` e `tempdb` , il concatenamento della proprietà tra database è abilitato per impostazione predefinita.        |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1043     |Il GUEST principale non deve avere accesso a un database utente          |Medio         |L'utente Guest consente l'accesso a un database per tutti gli account di accesso di cui non è stato eseguito il mapping a un utente di database specifico. Questa regola consente di verificare che l'utente Guest non sia in grado di connettersi a un database.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL        |
|VA1046     |CHECK_POLICY deve essere abilitato per tutti gli account di accesso SQL          |Basso         |CHECK_POLICY opzione consente di verificare gli account di accesso SQL rispetto ai criteri di dominio. Questa regola consente di controllare che l'opzione CHECK_POLICY sia abilitata per tutti gli account di accesso SQL.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1047     |Il controllo della scadenza delle password deve essere abilitato per tutti gli account di accesso SQL          |Basso         |I criteri di scadenza delle password consentono di gestire l'intervallo di validità di una password. Quando SQL Server applica i criteri di scadenza delle password, agli utenti viene chiesto di modificare le password obsolete e gli account con password scadute sono disabilitati. Questa regola consente di verificare che i criteri di scadenza delle password siano abilitati per tutti gli account di accesso SQL.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1048     |Non è necessario eseguire il mapping delle entità di database all' `sa` account          |Alto         |Un'entità di database di cui è stato eseguito il mapping all' `sa` account può essere sfruttata da un utente malintenzionato per elevare le autorizzazioni a `sysadmin`         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1052     |Rimuovere BUILTIN\Administrators come account di accesso al server          |Basso         |Il gruppo BUILTIN\Administrators contiene il gruppo Administrators locale di Windows. Nelle versioni precedenti di Microsoft SQL Server questo gruppo dispone di diritti di amministratore per impostazione predefinita. Questa regola consente di verificare che il gruppo sia stato rimosso dal SQL Server.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1053     |L'account con il nome predefinito `sa` deve essere rinominato o disabilitato          |Basso         |`sa` è un account noto con ID entità 1. Questa regola verifica che l' `sa` account sia stato rinominato o disabilitato.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1054     |Le autorizzazioni eccessive non devono essere concesse al ruolo PUBLIC su oggetti o colonne          |Basso         |Ogni account di accesso SQL Server appartiene al ruolo del server public. Quando a un'entità del server non sono state concesse o negate autorizzazioni specifiche per un oggetto a protezione diretta, l'utente eredita le autorizzazioni concesse a Public su tale oggetto. Questa regola consente di visualizzare un elenco di tutte le colonne o gli oggetti a protezione diretta accessibili a tutti gli utenti tramite il ruolo PUBLIC.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1058     |`sa` l'account di accesso deve essere disabilitato          |Alto         |`sa` è un account noto con ID entità 1. Questa regola verifica che l' `sa` account sia disabilitato.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1059     |xp_cmdshell deve essere disabilitato          |Alto         |xp_cmdshell genera una shell dei comandi di Windows e la passa a una stringa per l'esecuzione. Questa regola consente di verificare che xp_cmdshell sia disabilitata.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1067     |Posta elettronica database XPs deve essere disabilitato quando non è in uso          |Medio         |Questa regola consente di verificare che Posta elettronica database sia disabilitato quando non è configurato alcun profilo di posta elettronica database. Posta elettronica database può essere utilizzato per l'invio di messaggi di posta elettronica dal SQL Server motore di database ed è disabilitato per impostazione predefinita. Se non si utilizza questa funzionalità, è consigliabile disabilitarla per ridurre la superficie di attacco.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1068     |Le autorizzazioni del server non devono essere concesse direttamente alle entità          |Basso         |Le autorizzazioni a livello di server sono associate a un oggetto a livello di server per regolare quali utenti possono accedere all'oggetto. Questa regola consente di verificare che non vi siano autorizzazioni a livello di server concesse direttamente agli account di accesso.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1070     |Gli utenti del database non devono condividere lo stesso nome di un account di accesso al server          |Basso         |Gli utenti del database possono condividere lo stesso nome di un account di accesso al server. Questa regola convalida che non sono presenti utenti di questo tipo.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1072     |La modalità di autenticazione deve essere autenticazione di Windows          |Medio         |Sono disponibili due modalità di autenticazione: modalità di autenticazione di Windows e modalità mista. La modalità mista significa che SQL Server Abilita sia l'autenticazione di Windows che l'autenticazione SQL Server. Questa regola consente di verificare che la modalità di autenticazione sia impostata su autenticazione di Windows.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1094     |Le autorizzazioni di database non devono essere concesse direttamente alle entità          |Basso         |Le autorizzazioni sono regole associate a un oggetto a protezione diretta per regolare gli utenti che possono accedere all'oggetto. Questa regola consente di verificare che non vi siano autorizzazioni di database concesse direttamente agli utenti.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1095     |Autorizzazioni eccessive non devono essere concesse al ruolo PUBLIC          |Medio         |Ogni account di accesso SQL Server appartiene al ruolo del server public. Quando a un'entità del server non sono state concesse o negate autorizzazioni specifiche per un oggetto a protezione diretta, l'utente eredita le autorizzazioni concesse a Public su tale oggetto. Viene visualizzato un elenco di tutte le autorizzazioni concesse al ruolo PUBLIC.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1096     |All'entità GUEST non devono essere concesse le autorizzazioni nel database          |Basso         |Ogni database include un utente chiamato GUEST. Le autorizzazioni concesse a GUEST vengono ereditate dagli utenti che hanno accesso al database ma non dispongono di un account utente nel database. Questa regola consente di verificare che tutte le autorizzazioni siano state revocate dall'utente GUEST.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1097     |Al GUEST principale non devono essere concesse autorizzazioni per oggetti o colonne          |Basso         |Ogni database include un utente chiamato GUEST. Le autorizzazioni concesse a GUEST vengono ereditate dagli utenti che hanno accesso al database ma non dispongono di un account utente nel database. Questa regola consente di verificare che tutte le autorizzazioni siano state revocate dall'utente GUEST.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1099     |All'utente GUEST non devono essere concesse le autorizzazioni per le entità a protezione diretta del database          |Basso         |Ogni database include un utente chiamato GUEST. Le autorizzazioni concesse a GUEST vengono ereditate dagli utenti che hanno accesso al database ma non dispongono di un account utente nel database. Questa regola consente di verificare che tutte le autorizzazioni siano state revocate dall'utente GUEST.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1246     |Non usare i ruoli applicazione          |Basso         |Un ruolo applicazione è un'entità di database che consente a un'applicazione di essere eseguita con le proprie autorizzazioni di tipo utente. I ruoli applicazione consentono di accedere a dati specifici solo agli utenti che si connettono tramite una particolare applicazione. I ruoli applicazione sono basati su password (le applicazioni in genere hardcoded) e non sono basate sulle autorizzazioni che consentono di esporre il database alla rappresentazione del ruolo app tramite la password-indovinare. Questa regola consente di verificare che nel database non siano definiti ruoli applicazione.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL         |
|VA1248     |I ruoli del database definiti dall'utente non devono essere membri di ruoli predefiniti          |Medio         |Per gestire facilmente le autorizzazioni nei database SQL Server fornisce diversi ruoli, ovvero entità di sicurezza che raggruppano altre entità. Sono simili ai gruppi nel sistema operativo Microsoft Windows. Gli account del database e altri ruoli di SQL Server possono essere aggiunti ai ruoli a livello di database. Tutti i membri di un ruolo predefinito del database possono aggiungere altri utenti allo stesso ruolo. Questa regola verifica che nessun ruolo definito dall'utente sia membro dei ruoli predefiniti.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |
|VA1267     |Gli utenti indipendenti devono usare l'autenticazione di Windows          |Medio         |Gli utenti indipendenti sono utenti presenti all'interno del database e non richiedono un mapping degli account di accesso. Questa regola consente di controllare che gli utenti indipendenti usino l'autenticazione di Windows.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1280     |Le autorizzazioni del server concesse al pubblico dovrebbero essere ridotte al minimo          |Medio         |Ogni account di accesso SQL Server appartiene al ruolo del server public. Quando a un'entità del server non sono state concesse o negate autorizzazioni specifiche per un oggetto a protezione diretta, l'utente eredita le autorizzazioni concesse a Public su tale oggetto. Questa regola consente di verificare che le autorizzazioni del server concesse al pubblico siano ridotte al minimo.          |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1282     |I ruoli orfani devono essere rimossi          |Basso         |I ruoli orfani sono ruoli definiti dall'utente che non dispongono di membri. Eliminare i ruoli orfani perché non sono necessari nel sistema. Questa regola consente di controllare se sono presenti ruoli orfani.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |
|VA2020     |Al set minimo di entità devono essere concesse le autorizzazioni ALTER o ALTER ANY USER database-scoped          |Alto         |Ogni SQL Server entità a protezione diretta dispone di autorizzazioni associate che possono essere concesse alle entità. È possibile definire l'ambito delle autorizzazioni a livello di server (assegnato a account di accesso e ruoli del server) o a livello di database (assegnato agli utenti del database e ai ruoli del database). Queste regole verificano che a un solo set minimo di entità siano concesse le autorizzazioni ALTER o ALTER ANY USER database scoped.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |
|VA2033     |Al set minimo di entità è necessario concedere l'autorizzazione EXECUTE con ambito database per oggetti o colonne          |Basso         |Questa regola consente di controllare a quali entità viene concessa l'autorizzazione EXECUTE per oggetti o colonne per garantire che questa autorizzazione venga concessa a un set minimo di entità. Ogni SQL Server entità a protezione diretta dispone di autorizzazioni associate che possono essere concesse alle entità. È possibile definire l'ambito delle autorizzazioni a livello di server (assegnato a account di accesso e ruoli del server) o a livello di database, assegnato a utenti del database, ruoli del database o ruoli applicazione. L'autorizzazione EXECUTE si applica sia alle stored procedure che alle funzioni scalari, che possono essere utilizzate nelle colonne calcolate.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |
|VA2103     |È necessario revocare le autorizzazioni Execute non necessarie per le stored procedure estese          |Medio         |Le stored procedure estese sono dll che possono essere caricate ed eseguite in modo dinamico da un'istanza di SQL Server. SQL Server viene incluso in un pacchetto con numerose stored procedure estese che consentono l'interazione con le DLL di sistema. Questa regola consente di controllare che le autorizzazioni Execute non necessarie per le stored procedure estese siano state revocate.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA2107     |Il set minimo di entità deve essere membro dei ruoli predefiniti del database master del database SQL di Azure          |Alto         |Il database SQL fornisce due ruoli amministrativi con restrizioni nel database master a cui è possibile aggiungere account utente che concedono autorizzazioni per la creazione di database o la gestione degli account di accesso. Questa regola verifica che un set minimo di entità sia membro di questi ruoli amministrativi.         |<nobr/>Database SQL<br/><br/>Azure Synapse         |
|VA2108     |Il set minimo di entità deve essere membro dei ruoli predefiniti del database a elevato effetto          |Alto         |SQL Server fornisce i ruoli per semplificare la gestione delle autorizzazioni. I ruoli sono entità di sicurezza che raggruppano altre entità. I ruoli a livello di database sono inclusi nel relativo ambito di autorizzazione. Questa regola consente di verificare che un set minimo di entità siano membri dei ruoli predefiniti del database.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |
|VA2109     |Il set minimo di entità deve essere membro dei ruoli predefiniti del database con effetto basso          |Basso         |SQL Server fornisce i ruoli per semplificare la gestione delle autorizzazioni. I ruoli sono entità di sicurezza che raggruppano altre entità. I ruoli a livello di database sono inclusi nel relativo ambito di autorizzazione. Questa regola consente di verificare che un set minimo di entità siano membri dei ruoli predefiniti del database.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |
|VA2110     |È necessario revocare le autorizzazioni Execute per accedere al registro di sistema          |Alto         |Le stored procedure estese del registro di sistema consentono Microsoft SQL Server di leggere scrivere ed enumerare i valori e le chiavi nel registro di sistema. Vengono usati da Enterprise Manager per configurare il server. Questa regola consente di verificare che le autorizzazioni per l'esecuzione delle stored procedure estese del registro di sistema siano state revocate a tutti gli utenti (diversi da dbo).         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA2113     |Le autorizzazioni Data Transformation Services (DTS) devono essere concesse solo ai ruoli SSIS          |Medio         |Data Transformation Services (DTS), è un set di oggetti e utilità che consente di automatizzare le operazioni di estrazione, trasformazione e caricamento da e verso un database di. Gli oggetti sono pacchetti DTS e i relativi componenti e le utilità sono denominate strumenti DTS. Questa regola consente di verificare che solo ai ruoli SSIS siano concesse le autorizzazioni per utilizzare le stored procedure di sistema DTS e che le autorizzazioni per il ruolo PUBLIC per l'utilizzo delle stored procedure di sistema DTS siano state revocate.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA2114     |Il set minimo di entità deve essere membro dei ruoli predefiniti del server a elevato effetto          |Alto         |SQL Server fornisce i ruoli per semplificare la gestione delle autorizzazioni. I ruoli sono entità di sicurezza che raggruppano altre entità. I ruoli a livello di server sono a livello di server nell'ambito di autorizzazione. Questa regola consente di verificare che un set minimo di entità siano membri dei ruoli predefiniti del server.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA2129     |Le modifiche ai moduli firmati devono essere autorizzate          |Alto         |È possibile firmare un stored procedure, una funzione o un trigger con un certificato o una chiave asimmetrica. Le firme sono progettate per scenari in cui le autorizzazioni non possono essere ereditate tramite il concatenamento della proprietà oppure in cui la catena di proprietà è interrotta, come nel caso delle istruzioni SQL dinamiche. Questa regola consente di controllare le modifiche apportate ai moduli firmati, che potrebbero indicare un utilizzo dannoso.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Database SQL<br/><br/>Istanza gestita di SQL         |
|VA2130     |Tenere traccia di tutti gli utenti con accesso al database          |Basso         |Questo controllo tiene traccia di tutti gli utenti con accesso a un database. Assicurarsi che questi utenti siano autorizzati in base al ruolo corrente dell'organizzazione.         |<nobr>Database SQL<nobr/><br/><br/>Azure Synapse         |

## <a name="auditing-and-logging"></a>Controllo e registrazione

|ID regola  |Titolo regola  |Gravità della regola  |Descrizione della regola  |Piattaforma  |
|---------|---------|---------|---------|---------|
|VA1045     |È necessario abilitare la traccia predefinita          |Medio         |La traccia predefinita rappresenta un supporto alla risoluzione dei problemi per gli amministratori di database, poiché consente di disporre dei dati del log necessari per diagnosticare i problemi non appena si verificano. Questa regola consente di verificare che la traccia predefinita sia abilitata.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1091     |Il controllo dei tentativi di accesso riusciti e non riusciti (traccia predefinita) dovrebbe essere abilitato quando il controllo degli accessi è configurato per tenere traccia degli account di accesso          |Basso         |SQL Server configurazione di controllo degli accessi consente agli amministratori di tenere traccia degli utenti che accedono alle istanze di SQL Server. Se l'utente sceglie di contare sul controllo degli accessi per tenere traccia degli utenti che accedono alle istanze di SQL Server, è importante abilitarlo per i tentativi di accesso riusciti e non riusciti.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1093     |Il numero massimo di log degli errori deve essere maggiore o pari a 12          |Basso         |Ogni log degli errori di SQL Server disporrà di tutte le informazioni relative a errori o errori verificatisi dopo l'ultimo riavvio di SQL Server o dall'ultima volta in cui sono stati riciclati i log degli errori. Questa regola consente di verificare che il numero massimo di log degli errori sia maggiore o pari a 12.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1258     |I proprietari del database sono quelli previsti          |Alto         |I proprietari del database possono eseguire tutte le attività di configurazione e manutenzione nel database e possono anche eliminare i database in SQL Server. Il rilevamento dei proprietari del database è importante per evitare un'autorizzazione eccessiva per alcune entità. Creare una baseline che definisce i proprietari di database previsti per il database. Questa regola consente di controllare se i proprietari del database sono definiti nella linea di base.         |<nobr>SQL Server 2016 +<sup>3</sup><nobr/><br/><br/>Database SQL<br/><br/>Azure Synapse         |
|VA1264     |È necessario abilitare il controllo dei tentativi di accesso riusciti e non riusciti          |Basso         |SQL Server configurazione di controllo consente agli amministratori di tenere traccia degli utenti che accedono a SQL Server istanze di cui sono responsabili. Questa regola consente di verificare che il controllo sia abilitato per i tentativi di accesso riusciti e non riusciti.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1265     |È necessario abilitare il controllo dei tentativi di accesso riusciti e non riusciti per l'autenticazione del database indipendente          |Medio         |SQL Server configurazione di controllo consente agli amministratori di tenere traccia degli utenti che accedono a SQL Server istanze di cui sono responsabili. Questa regola consente di verificare che il controllo sia abilitato per i tentativi di accesso riusciti e non riusciti per l'autenticazione del database indipendente.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1281     |Tutte le appartenenze per i ruoli definiti dall'utente devono essere progettate          |Medio         |I ruoli definiti dall'utente sono entità di sicurezza definite dall'utente per raggruppare le entità per semplificare la gestione delle autorizzazioni. Il monitoraggio di questi ruoli è importante per evitare autorizzazioni eccessive. Creare una baseline che definisce l'appartenenza prevista per ogni ruolo definito dall'utente. Questa regola consente di controllare se tutte le appartenenze per i ruoli definiti dall'utente sono definite nella baseline.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |
|VA1283     |Nel sistema deve essere presente almeno 1 controllo attivo          |Basso         |Il controllo di un'istanza del motore di database di SQL Server o di un singolo database comporta il rilevamento e la registrazione degli eventi che si verificano nel motore di database. L'oggetto SQL Server Audit raccoglie un'unica istanza di azioni a livello di server o di database e gruppi di azioni da monitorare. Questa regola consente di verificare che nel sistema sia presente almeno un controllo attivo.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA2061     |Il controllo deve essere abilitato a livello di server          |Alto         |Il controllo del database SQL di Azure tiene traccia degli eventi di database e li scrive in un log di controllo nell'account di archiviazione di Azure. Il controllo consente di comprendere l'attività del database e di ottenere informazioni su discrepanze e anomalie che potrebbero indicare problemi aziendali o sospette violazioni della sicurezza, oltre a garantire la conformità alle normative. Per altre informazioni, vedere [controllo SQL di Azure](./auditing-overview.md). Questa regola consente di verificare che il controllo sia abilitato.         |<nobr/>Database SQL<br/><br/>Azure Synapse          |

## <a name="data-protection"></a>Protezione dei dati

|ID regola  |Titolo regola  |Gravità della regola  |Descrizione della regola  |Piattaforma  |
|---------|---------|---------|---------|---------|
|VA1098     |Qualsiasi endpoint del mirroring o SSB esistente deve richiedere la connessione AES          |Alto         |Gli endpoint di Service Broker e mirroring supportano algoritmi di crittografia diversi, tra cui senza crittografia. Questa regola consente di verificare che qualsiasi endpoint esistente richieda la crittografia AES.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1219     |Transparent Data Encryption deve essere abilitato          |Medio         |Transparent Data Encryption (Transparent Data Encryption) consente di proteggere i file di database dalla divulgazione di informazioni eseguendo la crittografia e la decrittografia in tempo reale del database, dei backup associati e dei file di log delle transazioni inattivi, senza richiedere modifiche all'applicazione. Questa regola consente di verificare che Transparent Data Encryption sia abilitato nel database.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |
|VA1220     |La comunicazione del database con TDS deve essere protetta tramite TLS          |Alto         |Microsoft SQL Server possibile utilizzare Secure Sockets Layer (SSL) o Transport Layer Security (TLS) per crittografare i dati trasmessi in una rete tra un'istanza di SQL Server e un'applicazione client. Questa regola consente di verificare che tutte le connessioni al SQL Server siano crittografate tramite TLS.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1221     |Le chiavi simmetriche di crittografia del database devono usare l'algoritmo AES          |Alto         |SQL Server usa le chiavi di crittografia per proteggere le credenziali dei dati e le informazioni di connessione archiviate in un database del server. SQL Server dispone di due tipi di chiavi: simmetrica e asimmetrica. Questa regola consente di controllare che le chiavi simmetriche della crittografia del database usino l'algoritmo AES.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |
|VA1222     |Cell-Level chiavi di crittografia devono usare l'algoritmo AES          |Alto         |Cell-Level Encryption (CLE) consente di crittografare i dati utilizzando chiavi simmetriche e asimmetriche. Questa regola controlla che Cell-Level chiavi simmetriche di crittografia usino l'algoritmo AES.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1223     |Le chiavi del certificato devono usare almeno 2048 bit          |Alto         |Le chiavi del certificato vengono usate in RSA e in altri algoritmi di crittografia per proteggere i dati. Queste chiavi devono avere una lunghezza sufficiente per proteggere i dati dell'utente. Questa regola consente di verificare che la lunghezza della chiave sia almeno di 2048 bit per tutti i certificati.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |
|VA1224     |La lunghezza delle chiavi asimmetriche deve essere almeno di 2048 bit          |Alto         |Le chiavi asimmetriche del database vengono usate in molti algoritmi di crittografia che devono avere una lunghezza sufficiente per proteggere i dati crittografati. questa regola verifica che tutte le chiavi asimmetriche archiviate nel database abbiano una lunghezza di almeno 2048 bit         |<nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/>Database SQL         |
|VA1279     |È necessario abilitare la crittografia forzata per TDS          |Alto         |Quando l'opzione Forza crittografia per il motore di database è abilitata, tutte le comunicazioni tra il client e il server vengono crittografate indipendentemente dal fatto che l'opzione ' Crittografa connessione ' (ad esempio da SSMS) sia selezionata o meno. Questa regola controlla che l'opzione Forza crittografia sia abilitata.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1288     |Le colonne di dati sensibili devono essere classificate          |Medio         |Questa regola consente di controllare se nel database digitalizzato sono presenti dati potenzialmente sensibili che non sono stati classificati.         |<nobr/>Database SQL         |
|VA2060     |Il rilevamento delle minacce SQL deve essere abilitato a livello di server          |Medio         |Il rilevamento delle minacce SQL offre un livello di sicurezza che rileva vulnerabilità potenziali e attività anomale nei database, ad esempio gli attacchi SQL injection e modelli di comportamento insolito. Quando viene rilevata una minaccia potenziale, il rilevamento delle minacce Invia un avviso in tempo reale utilizzabile tramite posta elettronica e nel centro sicurezza di Azure, che include procedure chiare di analisi e correzione per la minaccia specifica. Per altre informazioni, vedere [configurare il rilevamento delle minacce](./threat-detection-configure.md). Questo controllo verifica che rilevamento minacce SQL sia abilitato         |<nobr/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |

## <a name="installation-updates-and-patches"></a>Aggiornamenti e patch per l'installazione

|ID regola  |Titolo regola  |Gravità della regola  |Descrizione della regola  |Piattaforma  |
|---------|---------|---------|---------|---------|
| VA1018     |Installare gli aggiornamenti più recenti          |Alto         |Microsoft rilascia periodicamente gli aggiornamenti cumulativi per ogni versione di SQL Server. Questa regola controlla se è stato installato il CU più recente per la versione specifica di SQL Server in uso, passando una stringa per l'esecuzione. Questa regola consente di verificare che tutti gli utenti (eccetto dbo) non dispongano dell'autorizzazione per eseguire il xp_cmdshell stored procedure esteso. |<nobr>SQL Server 2005<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/><nobr>SQL Server 2016<nobr/><br/><br/>SQL Server 2017<br/>|
|VA2128     |La valutazione della vulnerabilità non è supportata per le versioni SQL Server inferiori SQL Server 2012          |Alto         |Per eseguire un'analisi di valutazione della vulnerabilità nel SQL Server è necessario aggiornare il server a SQL Server 2012 o versione successiva, SQL Server 2008 R2 e versioni precedenti non sono più supportate da Microsoft. Per altre informazioni, vedere <https://www.microsoft.com/cloud-platform/windows-sql-server-2008>.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |

## <a name="surface-area-reduction"></a>Riduzione superficie di attacco

|ID regola  |Titolo regola  |Gravità della regola  |Descrizione della regola  |Piattaforma  |
|---------|---------|---------|---------|---------|
|VA1022     |Le query distribuite ad hoc devono essere disabilitate          |Medio         |Le query distribuite ad hoc utilizzano le `OPENROWSET` `OPENDATASOURCE` funzioni e per connettersi a origini dati remote che utilizzano OLE DB. Questa regola consente di verificare che le query distribuite ad hoc siano disabilitate.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1023     |CLR deve essere disabilitato          |Alto         |CLR consente l'hosting e l'esecuzione di codice gestito nell'ambiente Microsoft SQL Server. Questa regola consente di verificare che CLR sia disabilitato.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1026     |CLR deve essere disabilitato          |Medio         |CLR consente l'hosting e l'esecuzione di codice gestito nell'ambiente Microsoft SQL Server. CLR Strict Security considera gli assembly SAFE e EXTERNAL_ACCESS come se fossero contrassegnati come unsafe e richiede che tutti gli assembly siano firmati da un certificato o da una chiave asimmetrica con un account di accesso corrispondente a cui è stata concessa l'autorizzazione UNSAFE ASSEMBLY nel database master. Questa regola consente di verificare che CLR sia disabilitato.         |<nobr>SQL Server 2017 +<sup>2</sup><nobr/><br/><br/>Istanza gestita di SQL         |
|VA1027     |Rimuovere gli assembly attendibili non rilevati          |Alto         |Gli assembly contrassegnati come unsafe devono essere firmati da un certificato o da una chiave asimmetrica con un account di accesso corrispondente a cui è stata concessa l'autorizzazione UNSAFE ASSEMBLY nel database master. Gli assembly attendibili possono ignorare questo requisito.          |<nobr>SQL Server 2017 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1044     |Le connessioni amministrative remote devono essere disabilitate a meno che non sia richiesto in modo specifico          |Medio         |Questa regola consente di verificare che le connessioni amministrative dedicate remote siano disabilitate se non vengono usate per il clustering per ridurre la superficie di attacco. SQL Server fornisce una connessione amministrativa dedicata (DAC). L'applicazione livello dati consente a un amministratore di accedere a un server in esecuzione per eseguire funzioni diagnostiche o istruzioni Transact-SQL oppure per risolvere i problemi nel server e diventa una destinazione interessante da attaccare quando viene abilitata in modalità remota.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1051     |AUTO_CLOSE deve essere disabilitato in tutti i database          |Medio         |L'opzione AUTO_CLOSE specifica se il database viene arrestato normalmente e le risorse vengono liberate dopo la disconnessione dell'ultimo utente. Indipendentemente dai relativi vantaggi, può causare un attacco Denial of Service aprendo e chiudendo in modo aggressivo il database, pertanto è importante tenere questa funzionalità disabilitata. Questa regola consente di verificare che questa opzione sia disabilitata nel database corrente.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1066     |Gli endpoint di Service Broker non utilizzati devono essere rimossi          |Basso         |Service Broker fornisce l'accodamento e la messaggistica affidabile per SQL Server. Service Broker viene usato sia per le applicazioni che usano una singola istanza di SQL Server che per le applicazioni che distribuiscono il lavoro tra più istanze. Gli endpoint di Service Broker includono opzioni per la sicurezza del trasporto e l'inoltro dei messaggi. Questa regola enumera tutti gli endpoint di Service Broker. Rimuovere quelli che non vengono usati.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1071     |L'opzione ' Cerca stored procedure di avvio ' deve essere disabilitata          |Medio         |Quando ' Scan for startup procs ' è abilitato SQL Server analizza ed esegue tutte le stored procedure di esecuzione automatica definite nel server. Se questa opzione è abilitata SQL Server esegue l'analisi di ed esegue tutte le stored procedure di esecuzione automatica definite nel server. Questa regola controlla che questa opzione sia disabilitata.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1092     |SQL Server istanza non deve essere annunciata dal servizio SQL Server Browser          |Basso         |SQL Server usa il servizio SQL Server Browser per enumerare le istanze del motore di database installato nel computer. Ciò consente alle applicazioni client di cercare un server e consente ai client di distinguere tra più istanze del motore di database nello stesso computer. Questa regola consente di verificare che l'istanza di SQL sia nascosta.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1102     |Il bit attendibile deve essere disabilitato in tutti i database tranne MSDB          |Alto         |La proprietà di database TRUSTWORTHY viene utilizzata per indicare se l'istanza di SQL Server considera attendibile il database e il contenuto al suo interno. Se questa opzione è abilitata, i moduli di database (ad esempio funzioni definite dall'utente o stored procedure) che utilizzano un contesto di rappresentazione possono accedere a risorse esterne al database. Questa regola verifica che il bit ATTENDIBILe sia disabilitato in tutti i database ad eccezione di MSDB.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1143     |l'utente ' dbo ' non deve essere usato per le normali operazioni del servizio          |Medio         |Il ' dbo ' o il proprietario del database è un account utente che dispone di autorizzazioni implicite per eseguire tutte le attività nel database. Ai membri del ruolo predefinito del server sysadmin viene automaticamente eseguito il mapping a dbo. Questa regola consente di verificare che dbo non sia l'unico account autorizzato ad accedere a questo database. Si noti che in un database pulito appena creato questa regola avrà esito negativo fino a quando non vengono creati altri ruoli.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL<br/><br/>Database SQL<br/><br/>Azure Synapse         |
|VA1144     |Il database modello deve essere accessibile solo da' dbo '          |Medio         |Il database modello viene utilizzato come modello per tutti i database creati nell'istanza di SQL Server. Le modifiche apportate al database model, ad esempio il modello di recupero delle dimensioni del database e altre opzioni del database, vengono applicate a tutti i database creati successivamente. Questa regola consente di verificare che dbo sia l'unico account autorizzato ad accedere al database modello.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1230     |FileStream deve essere disabilitato          |Alto         |FILESTREAM integra la SQL Server motore di database con un file system NTFS archiviando dati BLOB (Binary Large Object) varbinary (max) come file nel file system. Le istruzioni Transact-SQL consentono di inserire, aggiornare, eseguire query, eseguire ricerche ed eseguire il backup dei dati FILESTREAM. L'abilitazione di FILESTREAM in SQL Server espone un'API di streaming NTFS aggiuntiva, che aumenta la superficie di attacco e la rende soggetta ad attacchi dannosi. Questa regola consente di verificare che FILESTREAM sia disabilitato.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1235     |La configurazione del server ' replication XPs ' deve essere disabilitata          |Medio         |Disabilitare la configurazione del server deprecata ' replication XPs ' per limitare la superficie di attacco. Si tratta di un'impostazione di configurazione solo interna.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1244     |Gli utenti orfani devono essere rimossi dai database di SQL Server          |Medio         |Un utente del database esistente in un database ma non dispone di un account di accesso corrispondente nel database master o come risorsa esterna, ad esempio un utente di Windows, viene definito utente orfano ed è necessario rimuoverlo o modificarne il mapping a un account di accesso valido. Questa regola verifica che non siano presenti utenti orfani.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1245     |Le informazioni dbo devono essere coerenti tra il database di destinazione e il database master          |Alto         |Sono disponibili informazioni ridondanti sull'identità dbo per qualsiasi database: metadati archiviati nel database stesso e metadati archiviati nel database master. Questa regola verifica che queste informazioni siano coerenti tra il database di destinazione e il database master.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1247     |Non devono essere presenti SP contrassegnati come avvio automatico          |Alto         |Quando SQL Server è stato configurato per "Scan for startup procs", il Server analizzerà il database master per le stored procedure contrassegnate come avvio automatico. Questa regola consente di verificare che non esista alcun SPs contrassegnato come avvio automatico.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1256     |Gli assembly CLR utente non devono essere definiti nel database          |Alto         |Gli assembly CLR possono essere utilizzati per eseguire codice arbitrario in SQL Server processo. Questa regola consente di verificare che nel database non siano presenti assembly CLR definiti dall'utente.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA1277     |La crittografia di rete di base deve essere abilitata          |Alto         |La polibase è una tecnologia che accede e combina dati sia non relazionali che relazionali, dal SQL Server. L'opzione di crittografia di rete di base configura SQL Server per crittografare i canali di controllo e di dati quando si usa la funzione di base. Questa regola verifica che questa opzione sia abilitata.         |<nobr>SQL Server 2016 +<nobr/>         |
|VA1278     |Creazione di una linea di base di provider di gestione delle chiavi esterne          |Medio         |Il SQL Server Extensible Key Management (EKM) consente ai fornitori di moduli di protezione hardware e EKM di terze parti di registrare i propri moduli in SQL Server. Quando registrato SQL Server gli utenti possono utilizzare le chiavi di crittografia archiviate nei moduli EKM, questa regola Visualizza un elenco di provider EKM utilizzati nel sistema.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA2062     |Le regole del firewall a livello di database non devono concedere un accesso eccessivo          |Alto         |Il firewall a livello di database SQL di Azure consente di proteggere i dati impedendo tutti gli accessi al database finché non si specificano gli indirizzi IP autorizzati. Le regole del firewall a livello di database concedono l'accesso al database specifico in base all'indirizzo IP di origine di ogni richiesta. Le regole del firewall a livello di database per i database master e utente possono essere create e gestite solo tramite Transact-SQL, a differenza delle regole firewall a livello di server, che possono essere create e gestite anche usando il portale di Azure o PowerShell. Per altre informazioni, vedere [regole del firewall IP del database SQL di Azure e di analisi delle sinapsi di Azure](./firewall-configure.md). Questo controllo verifica che le regole del firewall a livello di database non concedano l'accesso a più di 255 indirizzi IP.         |<nobr/>Database SQL<br/><br/>Azure Synapse         |
|VA2063     |Le regole del firewall a livello di server non devono concedere un accesso eccessivo          |Alto         |Il firewall a livello di server SQL di Azure consente di proteggere il server impedendo tutti gli accessi ai database fino a quando non si specificano gli indirizzi IP dotati di autorizzazioni. Le regole del firewall a livello di Server concedono l'accesso a tutti i database che appartengono al server in base all'indirizzo IP di origine di ogni richiesta.  Le regole del firewall a livello di server possono essere create e gestite solo tramite Transact-SQL, nonché tramite il portale di Azure o PowerShell. Per altre informazioni, vedere [regole del firewall IP del database SQL di Azure e di analisi delle sinapsi di Azure](./firewall-configure.md). Questo controllo verifica che le regole del firewall a livello di server non concedano l'accesso a più di 255 indirizzi IP.         |<nobr/>Database SQL<br/><br/>Azure Synapse         |
|VA2064     |Le regole del firewall a livello di database devono essere rilevate e mantenute con una minima rigida          |Alto         |Il firewall a livello di database SQL di Azure consente di proteggere i dati impedendo tutti gli accessi al database finché non si specificano gli indirizzi IP autorizzati. Le regole del firewall a livello di database concedono l'accesso al database specifico in base all'indirizzo IP di origine di ogni richiesta. Le regole del firewall a livello di database per i database master e utente possono essere create e gestite solo tramite Transact-SQL, a differenza delle regole firewall a livello di server, che possono essere create e gestite anche usando il portale di Azure o PowerShell. Per altre informazioni, vedere [regole del firewall IP del database SQL di Azure e di analisi delle sinapsi di Azure](./firewall-configure.md). Questo controllo enumera tutte le regole del firewall a livello di database in modo che sia possibile identificare e risolvere le eventuali modifiche apportate a tali regole.         |<nobr/>Database SQL<br/><br/>Azure Synapse         |
|VA2065     |Le regole del firewall a livello di server devono essere rilevate e mantenute con una minima rigida          |Alto         |Il firewall a livello di server SQL di Azure consente di proteggere i dati impedendo tutti gli accessi ai database fino a quando non si specificano gli indirizzi IP dotati di autorizzazioni. Le regole del firewall a livello di Server concedono l'accesso a tutti i database che appartengono al server in base all'indirizzo IP di origine di ogni richiesta.  Le regole del firewall a livello di server possono essere create e gestite tramite Transact-SQL, nonché tramite il portale di Azure o PowerShell. Per altre informazioni, vedere [regole del firewall IP del database SQL di Azure e di analisi delle sinapsi di Azure](./firewall-configure.md).  Questo controllo enumera tutte le regole del firewall a livello di server in modo che sia possibile identificare e risolvere eventuali modifiche apportate a tali regole.         |<nobr/>Database SQL<br/><br/>Azure Synapse         |
|VA2111     |I database di esempio devono essere rimossi          |Basso         |Microsoft SQL Server viene fornito con diversi database di esempio. Questa regola consente di controllare se i database di esempio sono stati rimossi.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA2120     |Le funzionalità che potrebbero influire sulla sicurezza devono essere disabilitate          |Alto         |SQL Server è in grado di fornire un'ampia gamma di funzionalità e servizi. Alcune delle funzionalità e dei servizi forniti per impostazione predefinita potrebbero non essere necessari e l'abilitazione di tali servizi potrebbe influire negativamente sulla sicurezza del sistema. Questa regola consente di verificare che queste funzionalità siano disabilitate.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA2121     | La funzionalità' procedure di automazione OLE ' deve essere disabilitata         |Alto         |SQL Server è in grado di fornire un'ampia gamma di funzionalità e servizi. Alcune funzionalità e servizi, forniti per impostazione predefinita, potrebbero non essere necessari e l'abilitazione di tali servizi potrebbe influire negativamente sulla sicurezza del sistema. L'opzione OLE Automation Procedures controlla se è possibile creare istanze degli oggetti di automazione OLE all'interno di batch Transact-SQL. Si tratta di stored procedure estese che consentono agli utenti SQL Server di eseguire funzioni esterne a SQL Server. Indipendentemente dai relativi vantaggi, può anche essere usato per gli exploit ed è noto come meccanismo comune per l'impianto dei file nei computer di destinazione. È consigliabile usare PowerShell come sostituzione per questo strumento. Questa regola consente di verificare che la funzionalità "procedure di automazione OLE" sia disabilitata.          |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA2122     |La funzionalità' user options ' deve essere disabilitata          |Medio         |SQL Server è in grado di fornire un'ampia gamma di funzionalità e servizi. Alcune delle funzionalità e dei servizi forniti per impostazione predefinita potrebbero non essere necessari e l'abilitazione di tali servizi potrebbe influire negativamente sulla sicurezza del sistema. Le opzioni utente specificano le impostazioni predefinite globali per tutti gli utenti. Viene creato un elenco di opzioni predefinite per l'elaborazione delle query, che rimane valido per tutta la durata della sessione di lavoro dell'utente. Le opzioni utente consentono di modificare i valori predefiniti delle opzioni SET, se le impostazioni predefinite del server non sono appropriate. Questa regola consente di verificare che la funzionalità "User Options" sia disabilitata.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>Istanza gestita di SQL         |
|VA2126     |Estensibilità: le funzionalità che potrebbero influire sulla sicurezza devono essere disabilitate se non sono necessarie          |Medio         |SQL Server offre un'ampia gamma di funzionalità e servizi. Alcune funzionalità e servizi, forniti per impostazione predefinita, potrebbero non essere necessari e l'abilitazione di tali servizi potrebbe influire negativamente sulla sicurezza del sistema. Questa regola consente di controllare che le configurazioni che consentono l'estrazione di dati in un'origine dati esterna e l'esecuzione di script con determinate estensioni del linguaggio remoto siano disabilitate.         |<nobr>SQL Server 2016 +<nobr/>         |

## <a name="removed-rules"></a>Regole rimosse

|ID regola  |Titolo regola  |
|---------|---------|
|VA1021     |Le stored procedure temporanee globali devono essere rimosse         |
|VA1024    |È necessario abilitare la modalità di controllo C2 |
|VA1069     |Le autorizzazioni per la selezione dalle tabelle e dalle viste di sistema devono essere revocate da non sysadmin         |
|VA1090    |Assicurarsi che tutte le autorità governative e le stored procedure personalizzate siano crittografate |
|VA1103    |USA solo CLR con autorizzazione SAFE_ACCESS |
|VA1229     |L'impostazione FILESTREAM nel registro di sistema e in SQL Server configurazione deve corrispondere         |
|VA1231     |FileStream deve essere disabilitato (SQL)         |
|VA1234     |È necessario abilitare l'impostazione criteri comuni         |
|VA1252     |Elenco di eventi controllati e gestiti centralmente tramite specifiche del controllo del server.         |
|VA1253     |Elenco di eventi con ambito database da controllare e gestiti centralmente tramite specifiche del controllo del server         |
|VA1263     |Elencare tutti i controlli attivi nel sistema         |
|VA1266     |L'opzione ' MUST_CHANGE ' deve essere impostata su tutti gli account di accesso SQL         |
|VA1276     |È necessario disabilitare la funzionalità di Agent XPs         |
|VA1286     |Le autorizzazioni di database non devono essere concesse direttamente alle entità (oggetto o colonna)         |
|VA2000     |Al set minimo di entità devono essere concesse autorizzazioni con ambito database a elevato effetto         |
|VA2001     |Al set minimo di entità devono essere concesse autorizzazioni con ambito database a elevato effetto su oggetti o colonne         |
|VA2002     |Al set minimo di entità devono essere concesse autorizzazioni con ambito database a elevato effetto su varie entità a protezione diretta         |
|VA2010     |Al set minimo di entità devono essere concesse le autorizzazioni con ambito database a media Impact         |
|VA2021     |Al set minimo di entità devono essere concesse autorizzazioni ALTER con ambito database per oggetti o colonne         |
|VA2022     |Al set minimo di entità è necessario concedere l'autorizzazione ALTER con ambito database per varie entità a protezione diretta         |
|VA2030     |Al set minimo di entità devono essere concesse autorizzazioni SELECT o EXECUTE con ambito database         |
|VA2031     |A un set minimo di entità è necessario concedere la selezione con ambito database          |
|VA2032     |Al set minimo di entità devono essere concesse autorizzazioni SELECT o EXECUTE con ambito database per lo schema         |
|VA2034     |Al set minimo di entità è necessario concedere l'autorizzazione EXECUTE con ambito database per la raccolta di XML Schema         |
|VA2040     |Al set minimo di entità devono essere concesse autorizzazioni con ambito database a basso effetto         |
|VA2041     |Al set minimo di entità devono essere concesse autorizzazioni con ambito database a basso effetto per oggetti o colonne         |
|VA2042     |Al set minimo di entità devono essere concesse autorizzazioni con ambito database a basso effetto per lo schema         |
|VA2050     |Al set minimo di entità devono essere concesse le autorizzazioni per la definizione della vista con ambito database         |
|VA2051     |Al set minimo di entità devono essere concesse le autorizzazioni per la definizione della vista con ambito database per oggetti o colonne         |
|VA2052     |Al set minimo di entità deve essere concessa l'autorizzazione VIEW DEFINITION con ambito database per varie entità a protezione diretta         |
|VA2100     |Al set minimo di entità devono essere concesse autorizzazioni con ambito server a elevato effetto         |
|VA2101     |Al set minimo di entità devono essere concesse le autorizzazioni con ambito server a media Impact         |
|VA2102     |Al set minimo di entità devono essere concesse le autorizzazioni con ambito server a basso effetto         |
|VA2104     |Le autorizzazioni di esecuzione per le stored procedure estese devono essere revocate da PUBLIC         |
|VA2105     |Non è facile indovinare la password di accesso         |
|VA2112     |È necessario revocare le autorizzazioni da PUBLIC per Data Transformation Services (DTS)         |
|VA2115     |Il set minimo di entità deve essere membro dei ruoli predefiniti del server a effetto medio         |
|VA2123     |La funzionalità' accesso remoto ' deve essere disabilitata         |
|VA2127     |La funzionalità' script esterni ' deve essere disabilitata         |

## <a name="next-steps"></a>Passaggi successivi

- [Valutazione della vulnerabilità](sql-vulnerability-assessment.md)
- [Log delle regole di valutazione della vulnerabilità SQL](sql-database-vulnerability-assessment-rules-changelog.md)
