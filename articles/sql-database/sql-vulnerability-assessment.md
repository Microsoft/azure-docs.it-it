---
title: Valutazione della vulnerabilità SQL
description: Informazioni su come configurare la valutazione delle vulnerabilità SQL nel database SQL di Azure e interpretare i report di valutazione.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: mibar
ms.author: mibar
ms.reviewer: vanto, carlrab
ms.date: 04/19/2020
tags: azure-synapse
ms.openlocfilehash: 80629898b56f81fc738cb30df63766ea39adea6d
ms.sourcegitcommit: acb82fc770128234f2e9222939826e3ade3a2a28
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/21/2020
ms.locfileid: "81684261"
---
# <a name="sql-vulnerability-assessment-helps-you-identify-database-vulnerabilities"></a>SQL Vulnerability Assessment consente di identificare le vulnerabilità del database

SQL Vulnerability Assessment è un servizio facile da configurare che può individuare, tenere traccia e aiutare a risolvere potenziali vulnerabilità del database. È consigliabile usarlo in modo proattivo per migliorare la sicurezza dei database.

La valutazione delle vulnerabilità fa parte dell'offerta [Advanced Data Security,](sql-database-advanced-data-security.md) un pacchetto unificato per le funzionalità avanzate di sicurezza SQL. È possibile accedere e gestire la valutazione delle vulnerabilità tramite il portale di sicurezza avanzata dei dati di SQL centrale.

> [!NOTE]
> La valutazione delle vulnerabilità è supportata per il database SQL di Azure, l'istanza gestita del database SQL di Azure e Azure Synapse Analytics.Vulnerability Assessment is supported for Azure SQL Database, Azure SQL Database managed instance, and Azure Synapse Analytics. Per praticità, in questo articolo viene usato il database SQL per fare riferimento a uno qualsiasi di questi servizi di database gestiti.

## <a name="vulnerability-assessment"></a>Valutazione della vulnerabilità

SQL Vulnerability Assessment è un servizio che fornisce visibilità sullo stato di sicurezza. La valutazione delle vulnerabilità include procedure attuabili per risolvere i problemi di sicurezza e migliorare la sicurezza del database. Può essere utile per: 

- Soddisfare i requisiti di conformità che richiedono report di analisi dei database.
- Soddisfare gli standard per la privacy dei dati.
- Monitorare un ambiente di database dinamico in cui è difficile tenere traccia delle modifiche.

La valutazione delle vulnerabilità è un servizio di analisi integrato nel database SQL di Azure.Vulnerability Assessment is a scanning service built into Azure SQL Database. Il servizio utilizza una knowledge base di regole che segnalano le vulnerabilità di sicurezza. Vengono evidenziate le deviazioni dalle procedure consigliate, ad esempio configurazioni errate, autorizzazioni eccessive e dati sensibili non protetti.

Le regole si basano sulle procedure consigliate di Microsoft e si concentrano sui problemi di sicurezza che presentano i maggiori rischi per il database e i relativi dati importanti. Coprono i problemi a livello di database e i problemi di sicurezza a livello di server, come le impostazioni del firewall del server e le autorizzazioni a livello di server. Queste regole rappresentano anche molti dei requisiti specificati da vari organismi normativi per soddisfare i relativi standard di conformità.

I risultati dell'analisi includono le azioni applicabili per risolvere ogni problema, oltre a script di correzione personalizzati, ove applicabile. È possibile personalizzare un report di valutazione per l'ambiente impostando una linea di base accettabile per:You can customize an assessment report for your environment by setting an acceptable baseline for:
* Configurazioni delle autorizzazioni.
* Configurazioni delle funzioni.
* Impostazioni del database.

## <a name="implement-vulnerability-assessment"></a>Implementare la valutazione delle vulnerabilità

I passaggi seguenti implementano la valutazione delle vulnerabilità nel database SQL.

### <a name="1-run-a-scan"></a>1. Eseguire una scansione

Nel riquadro Database SQL di Azure, sotto l'intestazione **Sicurezza,** selezionare **Sicurezza avanzata dei dati.** Quindi fare clic su **Seleziona archiviazione** nel riquadro Valutazione **delle vulnerabilità** per aprire il riquadro Impostazioni di valutazione delle vulnerabilità per l'intero server SQL.

Configurare un account di archiviazione in cui verranno archiviati i risultati dell'analisi per tutti i database nel server. Per altre informazioni sugli account di archiviazione, vedere [Informazioni sugli account di archiviazione di Azure](../storage/common/storage-create-storage-account.md). Dopo aver configurato l'archiviazione, selezionare **Analizza** per cercare il database alla ricerca di vulnerabilità.

![Eseguire l'analisi di un database](./media/sql-vulnerability-assessment/pp_va_initialize.png)

  > [!NOTE]
  > L'analisi è un'operazione leggera e sicura, L'esecuzione richiede alcuni secondi ed è interamente di sola lettura. Non apporta alcuna modifica al database.

### <a name="2-view-the-report"></a>2. Visualizzare il report

Al termine dell'analisi, il report di analisi viene visualizzato automaticamente nel portale di Azure.When your scan is finished, your scan report is automatically displayed in the Azure portal. Il report presenta una panoramica dello stato di sicurezza. Elenca quanti problemi sono stati rilevati e le rispettive gravità. I risultati includono avvisi sulle deviazioni dalle procedure consigliate e uno snapshot delle impostazioni relative alla sicurezza, ad esempio le entità e i ruoli del database e le autorizzazioni associate. Il report di analisi fornisce anche una mappa dei dati sensibili individuati nel database. Include suggerimenti per classificare i dati utilizzando l'individuazione e la classificazione dei [dati.](sql-database-data-discovery-and-classification.md)

![Visualizzare il report](./media/sql-vulnerability-assessment/pp_main_getstarted.png)

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. Analizzare i risultati e risolvere i problemi

Esaminare i risultati e determinare quali di questi sono problemi di sicurezza reali nell'ambiente in uso. Eseguire il drill-down per ogni risultato con errore per comprendere l'impatto della ricerca e il motivo per cui i controlli di sicurezza non sono riusciti. Usare le informazioni sulle azioni di correzione applicabili incluse nel report per risolvere il problema.

![Analizzare il report](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

### <a name="4-set-your-baseline"></a>4. Impostare la linea di base

Quando si esaminano i risultati della valutazione, è possibile contrassegnare risultati specifici come una *linea di base* accettabile nell'ambiente. La baseline è essenzialmente una personalizzazione della modalità di visualizzazione dei risultati. I risultati corrispondenti alla baseline non vengono considerati problemi nelle analisi successive. Dopo aver stabilito lo stato di sicurezza di base, la valutazione delle vulnerabilità segnala solo le deviazioni dalla linea di base. In questo modo, puoi concentrare la tua attenzione sulle questioni pertinenti.

![Impostare la linea di base](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Eseguire una nuova scansione per visualizzare il report di monitoraggio personalizzato

Dopo aver completato l'impostazione delle **linee di base**delle regole, eseguire una nuova analisi per visualizzare il report personalizzato. La valutazione delle vulnerabilità ora segnala solo i problemi di sicurezza che si discostano dallo stato di base approvato.

![Visualizzare il report personalizzato](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)

Il servizio Valutazione della vulnerabilità può ora essere usato per controllare che il database mantenga un livello elevato di sicurezza in qualsiasi momento e che i criteri aziendali siano soddisfatti. Se sono necessari report di conformità, i report di valutazione delle vulnerabilità possono essere utili per facilitare il processo di conformità.

### <a name="6-set-up-periodic-recurring-scans"></a>6. Impostare scansioni periodiche ricorrenti

Accedere alle impostazioni di Valutazione delle vulnerabilità per attivare le **scansioni ricorrenti periodiche.** Questa impostazione consente di configurare La valutazione delle vulnerabilità per eseguire automaticamente un'analisi del database una volta alla settimana. Un riepilogo dei risultati della scansione viene inviato agli indirizzi e-mail forniti.

![Visualizzare il report personalizzato](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

### <a name="7-export-an-assessment-report"></a>7. Esportare un rapporto di valutazione

Selezionare **Esporta risultati scansione** per creare un rapporto Excel scaricabile del risultato della scansione. Questo report contiene una scheda di riepilogo che visualizza un riepilogo della valutazione. Il report include tutti i controlli non riusciti. Include anche una scheda **Risultati** che contiene l'insieme completo dei risultati della scansione. I risultati includono tutti i controlli eseguiti e i dettagli dei risultati per ognuno.

### <a name="8-view-scan-history"></a>8. Visualizzare la cronologia di scansione

Selezionare **Cronologia analisi** nel riquadro Valutazione delle vulnerabilità per visualizzare una cronologia di tutte le analisi eseguite in precedenza nel database. Selezionare un'analisi specifica nell'elenco per visualizzarne i risultati dettagliati.

Il servizio Valutazione della vulnerabilità può ora essere usato per controllare che il database mantenga un livello elevato di sicurezza in qualsiasi momento e che i criteri aziendali siano soddisfatti. Se sono necessari report di conformità, i report di valutazione delle vulnerabilità possono essere utili per facilitare il processo di conformità.

## <a name="manage-vulnerability-assessments-by-using-azure-powershell"></a>Gestire le valutazioni delle vulnerabilità tramite Azure PowerShellManage vulnerability assessments by using Azure PowerShell

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]
> [!IMPORTANT]
> Il modulo di PowerShell Azure Resource Manager è ancora supportato dal database SQL di Azure, ma tutto lo sviluppo futuro è per il modulo Az.Sql.The PowerShell Azure Resource Manager module is still supported by Azure SQL Database, but all future development is for the Az.Sql module. Per questi cmdlet, vedere [AzureRM.Sql](https://docs.microsoft.com/powershell/module/AzureRM.Sql/). Gli argomenti per i comandi nel modulo Az e nei moduli di AzureRm sono sostanzialmente identici.

È possibile usare i cmdlet di Azure PowerShell per gestire a livello di codice le valutazioni delle vulnerabilità. I cmdlet supportati sono:

| Nome del cmdlet come collegamento | Descrizione |
| :-------------------- | :---------- |
| [Clear-AzSqlDatabaseVulnerabiliyAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Cancella la linea di base della regola di valutazione delle vulnerabilità.<br/>Innanzitutto, impostare la linea di base prima di utilizzare questo cmdlet per cancellarla. |
| [Clear-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting) | Cancella le impostazioni di valutazione delle vulnerabilità di un database. |
| [Convert-AzSqlDatabaseVulnerabilityAssessmentScanConvert-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan) | Converte i risultati dell'analisi delle vulnerabilità in un file Excel. |
| [Get-AzSqlDatabaseVulnerabiliyAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Ottiene la linea di base della regola di valutazione delle vulnerabilità per una determinata regola. |
| [Get-AzSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord) | Ottiene tutti i record di analisi Disseppie associati a un determinato database. |
| [Get-AzSqlDatabaseVulnerabiliyAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting) | Restituisce le impostazioni di valutazione delle vulnerabilità di un database. |
| [Set-AzSqlDatabaseVulnerabiliyAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Imposta la linea di base della regola di valutazione delle vulnerabilità. |
| [Start-AzSqlDatabaseVulnerabilityAssessmentScanStart-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan) | Attiva l'avvio di un'analisi di valutazione delle vulnerabilità. |
| [Aggiornamento-AzSqlDatabaseVulnerabilityAssessmentSettingUpdate-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting) | Aggiorna le impostazioni di valutazione delle vulnerabilità di un database. |
| &nbsp; | &nbsp; |

Per un esempio di script, vedere [Supporto di PowerShell per la valutazione della vulnerabilità di SQL di Azure](https://blogs.msdn.microsoft.com/sqlsecurity/20../../azure-sql-vulnerability-assessment-now-with-powershell-support/).

## <a name="manage-vulnerability-assessment-baseline-rules-by-using-resource-manager-templates"></a>Gestire le regole di base di valutazione delle vulnerabilità utilizzando i modelli di Resource Manager

Per configurare le linee di base per la `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` valutazione delle vulnerabilità usando i modelli di Azure Resource Manager, usare il tipo.

Assicurarsi di `vulnerabilityAssessments` aver abilitato nel computer che esegue SQL Server prima di aggiungere le linee di base.

Di seguito è riportato un esempio per la definizione della regola di base VA2065 in masterdb e VA1143 in userdb come risorse in un modello di Resource Manager:Here's an example for defining Baseline Rule VA2065 to masterdb and VA1143 to userdb as resources in a Resource Manager template:

```json
   "resources": [
      {
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "FirewallRuleName3",
                     "StartIpAddress",
                     "EndIpAddress"
                  ]
               },
               {
                  "result": [
                     "FirewallRuleName4",
                     "62.92.15.68",
                     "62.92.15.68"
                  ]
               }
            ]
         },
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA2130/Default')]",
         "dependsOn": [
            "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
         ],
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "dbo"
                  ]
               }
            ]
         }
      }
   ]
```

Per il database master e il database utente, i nomi delle risorse vengono definiti in modo diverso:

* Database master - "nome": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/<b>master</b>')]",
* Database utente - "nome": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/<b>default</b>')]",
 
 
 Per gestire i tipi booleani come true/false, impostare il risultato della linea di base con l'input binario come "1"/"0".
 
```json
   {
      "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
      "apiVersion": "2018-06-01-preview",
      "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",

      "dependsOn": [
         "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
      ],

      "properties": {
         "baselineResults": [
            {
               "result": [
                  "1"
               ]
            }
         ]
      }

   }
```

## <a name="next-steps"></a>Passaggi successivi  

- Ulteriori informazioni su [Advanced Data Security](sql-database-advanced-data-security.md).
- Ulteriori informazioni [sull'individuazione e](sql-database-data-discovery-and-classification.md)la classificazione dei dati .
