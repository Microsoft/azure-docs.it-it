---
title: Archiviare i risultati dell'analisi di valutazione delle vulnerabilità in un account di archiviazione accessibile dietro firewall e reti virtuali
description: Fornisce istruzioni su come archiviare le analisi di valutazione delle vulnerabilità (VA) in un account di archiviazione a cui è possibile accedere tramite un firewall o una rete virtuale
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.topic: conceptual
author: barmichal
ms.author: mibar
ms.reviewer: vanto
ms.date: 04/17/2020
ms.openlocfilehash: 36783c84acc22d6bc1084c2c13f455dedbfc77ca
ms.sourcegitcommit: d57d2be09e67d7afed4b7565f9e3effdcc4a55bf
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/22/2020
ms.locfileid: "81771859"
---
# <a name="store-vulnerability-assessment-scan-results-in-a-storage-account-accessible-behind-firewalls-and-vnets"></a>Archiviare i risultati dell'analisi di valutazione delle vulnerabilità in un account di archiviazione accessibile dietro firewall e reti virtuali

Se si limita l'accesso all'account di archiviazione in Azure per determinate reti virtuali o servizi, è necessario abilitare la configurazione appropriata in modo che l'analisi di valutazione delle vulnerabilità (VA) per i database SQL o le istanze gestite abbia accesso a tale account di archiviazione.

## <a name="enable-azure-sql-database-va-scanning-access-to-the-storage-account"></a>Abilitare l'accesso di analisi VA del database SQL di Azure all'account di archiviazioneEnable Azure SQL Database VA scanning access to the storage account

Se l'account di archiviazione VA è stato configurato in modo che sia accessibile solo da determinate reti o servizi, è necessario assicurarsi che le analisi di VA per il database SQL di Azure siano in grado di archiviare le analisi nell'account di archiviazione. Per individuare l'account di archiviazione in uso, passare al riquadro **del server SQL** nel portale di [Azure](https://portal.azure.com), in **Sicurezza**selezionare **Sicurezza avanzata dei dati**.

:::image type="content" source="media/sql-database-vulnerability-assessment-storage/va-storage.png" alt-text="va-storage":::

È possibile usare l'account di archiviazione esistente o creare un nuovo account di archiviazione per archiviare i risultati dell'analisi VA per tutti i database in Azure SQL Server.You can use the existing storage account, or create a new storage account to store VA scan results for all databases on your Azure SQL Server.

Passare al **gruppo di** risorse che contiene l'account di archiviazione e accedere al riquadro Account di **archiviazione.** In **Impostazioni**selezionare **Firewall e reti virtuali.**

Verificare che **l'opzione Consenti accesso ai servizi Microsoft attendibili a questo account di archiviazione** sia selezionata.

:::image type="content" source="media/sql-database-vulnerability-assessment-storage/storage-allow-microsoft-services.png" alt-text="storage-allow-microsoft-services":::

## <a name="store-va-scan-results-for-azure-sql-managed-instance-in-a-storage-account-that-can-be-accessed-behind-a-firewall-or-vnet"></a>Archiviare i risultati dell'analisi VA per l'istanza gestita SQL di Azure in un account di archiviazione a cui è possibile accedere tramite un firewall o una rete virtualeStore VA scan results for Azure SQL Managed Instance in a storage account that can be accessed behind a firewall or VNet

Poiché l'istanza gestita non è un servizio Microsoft attendibile e dispone di una rete virtuale diversa dall'account di archiviazione, l'esecuzione di un'analisi VA genererà un errore.

Per supportare le scansioni VA nelle istanze gestite, attenersi alla seguente procedura:

1. Nel riquadro **Dell'istanza gestita SQL,** sotto l'intestazione **Panoramica,** fare clic sul collegamento **Rete virtuale/subnet.** Verrà visualizzato il riquadro **Rete virtuale.**

   :::image type="content" source="media/sql-database-managed-instance-public-endpoint-configure/mi-overview.png" alt-text="mi-overview2":::

1. In **Impostazioni**selezionare **Subnet.** Fare clic su **Subnet** nel nuovo riquadro per aggiungere una subnet e dedelirla a *Microsoft.sql.managedInstance*. Per ulteriori informazioni, vedere [Gestire le subnet](../virtual-network/virtual-network-manage-subnet.md).

   :::image type="content" source="media/sql-database-vulnerability-assessment-storage/mi-subnets.png" alt-text="mi-subnets":::

1. Nel riquadro **Rete virtuale,** in **Impostazioni,** selezionare **Endpoint servizio.** Fare clic su **Aggiungi** nel nuovo riquadro e aggiungere il servizio *Microsoft.Storage* come nuovo endpoint del servizio. Assicurarsi che la subnet *ManagedInstance* sia selezionata. Scegliere **Aggiungi**.

   :::image type="content" source="media/sql-database-vulnerability-assessment-storage/mi-service-endpoint.png" alt-text="mi-service-endpoint":::

1. Passare **all'account di archiviazione** selezionato per archiviare le scansioni VA. In **Impostazioni**selezionare **Firewall e reti virtuali.** Fare clic su **Aggiungi rete virtuale esistente**. Selezionare la rete virtuale e la subnet dell'istanza gestita e fare clic su **Aggiungi**.

   :::image type="content" source="media/sql-database-vulnerability-assessment-storage/storage-firewall.png" alt-text="firewall di archiviazione":::

A questo punto dovrebbe essere possibile archiviare le scansioni VA per le istanze gestite nell'account di archiviazione.

## <a name="next-steps"></a>Passaggi successivi

- [Valutazione delle vulnerabilità](sql-vulnerability-assessment.md)
- [Creare un account di archiviazione di Azure](../storage/common/storage-account-create.md)
- [Sicurezza dei dati avanzata per il database SQL di Azure](sql-database-advanced-data-security.md)