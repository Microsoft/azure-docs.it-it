---
title: Archiviare i risultati dell'analisi di valutazione della vulnerabilità in un account di archiviazione accessibile dietro i firewall e reti virtuali
description: Fornisce istruzioni su come archiviare le analisi di valutazione della vulnerabilità in un account di archiviazione a cui è possibile accedere tramite un firewall o un VNet
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.topic: conceptual
author: barmichal
ms.author: mibar
ms.reviewer: vanto
ms.date: 04/17/2020
ms.openlocfilehash: 36783c84acc22d6bc1084c2c13f455dedbfc77ca
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/28/2020
ms.locfileid: "81771859"
---
# <a name="store-vulnerability-assessment-scan-results-in-a-storage-account-accessible-behind-firewalls-and-vnets"></a>Archiviare i risultati dell'analisi di valutazione della vulnerabilità in un account di archiviazione accessibile dietro i firewall e reti virtuali

Se si limita l'accesso all'account di archiviazione in Azure per determinati reti virtuali o servizi, è necessario abilitare la configurazione appropriata in modo che l'analisi della vulnerabilità (VA) per i database SQL o le istanze gestite abbia accesso a tale account di archiviazione.

## <a name="enable-azure-sql-database-va-scanning-access-to-the-storage-account"></a>Abilitare l'analisi del database SQL di Azure per l'accesso all'account di archiviazione

Se l'account di archiviazione VA è stato configurato in modo da essere accessibile solo da determinate reti o servizi, è necessario assicurarsi che le analisi di VA per il database SQL di Azure siano in grado di archiviare le analisi nell'account di archiviazione. Per individuare l'account di archiviazione in uso, passare al riquadro di **SQL Server** nel [portale di Azure](https://portal.azure.com), in **sicurezza**, selezionare **sicurezza dati avanzata**.

:::image type="content" source="media/sql-database-vulnerability-assessment-storage/va-storage.png" alt-text="va-archiviazione":::

È possibile usare l'account di archiviazione esistente o creare un nuovo account di archiviazione per archiviare i risultati dell'analisi di VA per tutti i database nel SQL Server di Azure.

Passare al **gruppo di risorse** che contiene l'account di archiviazione e accedere al riquadro **account di archiviazione** . In **Impostazioni**selezionare **firewall e reti virtuali**.

Assicurarsi che **l'opzione Consenti accesso ai servizi Microsoft attendibili a questo account di archiviazione** sia selezionata.

:::image type="content" source="media/sql-database-vulnerability-assessment-storage/storage-allow-microsoft-services.png" alt-text="archiviazione-Consenti-Microsoft-Services":::

## <a name="store-va-scan-results-for-azure-sql-managed-instance-in-a-storage-account-that-can-be-accessed-behind-a-firewall-or-vnet"></a>Archiviare i risultati dell'analisi per Azure SQL Istanza gestita in un account di archiviazione a cui è possibile accedere dietro un firewall o VNet

Poiché Istanza gestita non è un servizio Microsoft attendibile e ha un VNet diverso rispetto all'account di archiviazione, l'esecuzione di un'analisi di VA genera un errore.

Per supportare le analisi di VA sulle istanze gestite, attenersi alla procedura seguente:

1. Nel riquadro **istanza gestita di SQL** , sotto l'intestazione **Panoramica** , fare clic sul collegamento **rete virtuale/subnet** . Verrà quindi riportato al riquadro **rete virtuale** .

   :::image type="content" source="media/sql-database-managed-instance-public-endpoint-configure/mi-overview.png" alt-text="mi-overview2":::

1. In **Impostazioni**selezionare **Subnet**. Fare clic su **subnet** nel nuovo riquadro per aggiungere una subnet e delegarla a *Microsoft. sql\managedInstance*. Per ulteriori informazioni, vedere [Manage Subnets](../virtual-network/virtual-network-manage-subnet.md).

   :::image type="content" source="media/sql-database-vulnerability-assessment-storage/mi-subnets.png" alt-text="mi-subnet":::

1. Nel riquadro **rete virtuale** , in **Impostazioni**, selezionare **endpoint servizio**. Fare clic su **Aggiungi** nel nuovo riquadro e aggiungere il servizio *Microsoft. storage* come nuovo endpoint di servizio. Verificare che la subnet *ManagedInstance* sia selezionata. Fare clic su **Aggiungi**.

   :::image type="content" source="media/sql-database-vulnerability-assessment-storage/mi-service-endpoint.png" alt-text="mi-service-endpoint":::

1. Passare all' **account di archiviazione** selezionato per archiviare le analisi di va. In **Impostazioni**selezionare **firewall e reti virtuali**. Fare clic su **Aggiungi rete virtuale esistente**. Selezionare la rete virtuale dell'istanza gestita e la subnet, quindi fare clic su **Aggiungi**.

   :::image type="content" source="media/sql-database-vulnerability-assessment-storage/storage-firewall.png" alt-text="archiviazione-Firewall":::

A questo punto dovrebbe essere possibile archiviare le analisi di VA per le istanze gestite nell'account di archiviazione.

## <a name="next-steps"></a>Passaggi successivi

- [Valutazione della vulnerabilità](sql-vulnerability-assessment.md)
- [Creare un account di archiviazione di Azure](../storage/common/storage-account-create.md)
- [Sicurezza dei dati avanzata per il database SQL di Azure](sql-database-advanced-data-security.md)