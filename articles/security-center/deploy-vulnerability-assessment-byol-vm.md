---
title: Valutazione della vulnerabilità della VM BYOL nel centro sicurezza di Azure
description: Distribuire una soluzione di valutazione della vulnerabilità BYOL nelle macchine virtuali di Azure per ottenere le raccomandazioni nel centro sicurezza di Azure che consentono di proteggere le macchine virtuali.
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.service: security-center
ms.devlang: na
ms.topic: how-to
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 10/13/2020
ms.author: memildin
ms.openlocfilehash: fefd4c457ad15da775392e3bd10ba1906deba693
ms.sourcegitcommit: f88074c00f13bcb52eaa5416c61adc1259826ce7
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/21/2020
ms.locfileid: "92341992"
---
# <a name="deploy-a-bring-your-own-license-byol-vulnerability-assessment-solution"></a>Distribuire una soluzione di valutazione della vulnerabilità di Bring your own License (BYOL)

Se è stato abilitato **Azure Defender per i server**, è possibile usare lo strumento di valutazione della vulnerabilità incorporato del Centro sicurezza di Azure, come descritto in [Integrated vulnerabilità scanner per le macchine virtuali](./deploy-vulnerability-assessment-vm.md). Questo strumento è integrato in Azure Defender e non richiede licenze esterne. tutto viene gestito senza problemi all'interno del Centro sicurezza. Inoltre, lo scanner integrato supporta i computer abilitati per Azure Arc.

In alternativa, potrebbe essere necessario distribuire una soluzione di valutazione della vulnerabilità con licenza privata da [Qualys](https://www.qualys.com/lp/azure) o [Rapid7](https://www.rapid7.com/products/insightvm/). È possibile installare una di queste soluzioni partner in più macchine virtuali appartenenti alla stessa sottoscrizione, ma non ai computer abilitati per Azure Arc.

## <a name="availability"></a>Disponibilità

|Aspetto|Dettagli|
|----|:----|
|Stato della versione:|Disponibile a livello generale|
|Tipi di computer (scenari ibridi):|![Sì](./media/icons/yes-icon.png) Macchine virtuali di Azure<br>![No](./media/icons/no-icon.png) Computer abilitati per Azure Arc|
|Prezzi:|Livello gratuito|
|Autorizzazioni e ruoli obbligatori:|Il **proprietario della risorsa** può distribuire lo scanner<br>Il **lettore di sicurezza** può visualizzare i risultati|
|Cloud:|![Sì](./media/icons/yes-icon.png) Cloud commerciali<br>![No](./media/icons/no-icon.png) Cloud nazionali/sovrani (US Gov, governo cinese, altri governi)|
|||


## <a name="deploy-a-byol-solution-from-the-azure-portal"></a>Distribuire una soluzione BYOL dalla portale di Azure

Le opzioni BYOL si riferiscono alle soluzioni supportate per la valutazione della vulnerabilità di terze parti. Attualmente i provider supportati sono Qualys e Rapid7.

Le soluzioni supportate segnalano i dati sulle vulnerabilità alla piattaforma di gestione del partner. A sua volta, tale piattaforma trasmette dati di vulnerabilità e monitoraggio dell'integrità al Centro sicurezza. È possibile identificare le VM vulnerabili nel dashboard del Centro sicurezza e passare alla console di gestione dei partner direttamente dal centro sicurezza per informazioni e report aggiuntivi.

1. Dal [portale di Azure](https://azure.microsoft.com/features/azure-portal/)aprire il **Centro sicurezza**.

1. Dal menu del Centro sicurezza aprire la pagina **raccomandazioni** .

1. Selezionare la raccomandazione **per abilitare una soluzione di valutazione della vulnerabilità nelle macchine virtuali**.

    :::image type="content" source="./media/deploy-vulnerability-assessment-vm/recommendation-page-machine-groupings.png" alt-text="È necessario abilitare i raggruppamenti dei computer della soluzione * * di valutazione della vulnerabilità nella pagina delle raccomandazioni * * delle macchine virtuali" lightbox="./media/deploy-vulnerability-assessment-vm/recommendation-page-machine-groupings.png":::

    Le macchine virtuali verranno visualizzate in uno o più dei seguenti gruppi:

    * **Risorse integre** : il Centro sicurezza ha rilevato una soluzione di valutazione della vulnerabilità in esecuzione in queste macchine virtuali.
    * **Risorse non integre** : un'estensione dello scanner di vulnerabilità può essere distribuita in queste macchine virtuali. 
    * **Risorse non applicabili** : queste macchine virtuali non possono avere un'estensione dello scanner di vulnerabilità distribuita.

1. Dall'elenco di computer non **integri selezionare quelli**per ricevere una soluzione di valutazione della vulnerabilità e selezionare Correggi.

    >[!IMPORTANT]
    > A seconda della configurazione, è possibile visualizzare solo un subset di questo elenco. 
    >
    > - Se non è stato configurato uno scanner di vulnerabilità di terze parti, non verrà offerta la possibilità di distribuirlo.
    > - Se le macchine virtuali selezionate non sono protette con Azure Defender, l'opzione ASC Integrated vulnerabilità scanner non sarà disponibile.

    :::image type="content" source="./media/deploy-vulnerability-assessment-vm/recommendation-remediation-options.png" alt-text="È necessario abilitare i raggruppamenti dei computer della soluzione * * di valutazione della vulnerabilità nella pagina delle raccomandazioni * * delle macchine virtuali":::

1. Se si sta configurando una nuova configurazione di BYOL, selezionare **configura un nuovo scanner di vulnerabilità di terze parti**, selezionare l'estensione pertinente, selezionare **continua**e immettere i dettagli del provider come indicato di seguito:

    1. Per **Gruppo di risorse** selezionare **Usa esistente**.
    1. Per **Località** selezionare la località geografica in cui si trova la soluzione.
    1. Per Qualys, immettere la licenza fornita da Qualys nel campo del **codice di licenza** .
    1. Per Rapid7, caricare il **file di configurazione Rapid7**.
    1. Nella casella **chiave pubblica** immettere le informazioni sulla chiave pubblica fornite dal partner.
    1. Per installare automaticamente questo agente di valutazione della vulnerabilità in tutte le VM individuate nella sottoscrizione di questa soluzione, selezionare **distribuzione automatica**.
    1. Selezionare **OK**.

1. Se è già stata configurata la soluzione BYOL, selezionare **Distribuisci lo scanner di vulnerabilità di terze parti configurato**, selezionare l'estensione pertinente e selezionare **continua**.

Dopo aver installato la soluzione di valutazione della vulnerabilità nei computer di destinazione, il Centro sicurezza esegue un'analisi per rilevare e identificare le vulnerabilità nel sistema e nell'applicazione. Il completamento della prima analisi potrebbe richiedere circa due ore. Successivamente, viene eseguito ogni ora.



## <a name="deploy-a-byol-solution-using-powershell-and-the-rest-api"></a>Distribuire una soluzione BYOL tramite PowerShell e l'API REST

Per a livello distribuire una soluzione di valutazione della vulnerabilità con licenza privata da [Qualys](https://www.qualys.com/lp/azure) o [Rapid7](https://www.rapid7.com/products/insightvm/), usare lo script fornito da [PowerShell > soluzione di vulnerabilità](https://github.com/Azure/Azure-Security-Center/tree/master/Powershell%20scripts/Vulnerability%20Solution). Questo script usa l'API REST per creare una nuova soluzione di sicurezza in ASC. È necessario disporre di una licenza e di una chiave fornita dal provider di servizi (Qualys o Rapid7).

> [!IMPORTANT] 
> Per ogni licenza è possibile creare una sola soluzione. Il tentativo di creare un'altra soluzione con lo stesso nome/licenza/chiave avrà esito negativo.

### <a name="prerequisites"></a>Prerequisiti

Moduli di PowerShell necessari:

- Install-module AZ
- Install-module AZ. Security

### <a name="run-the-script"></a>Eseguire lo script

Per eseguire lo script, sono necessarie le informazioni rilevanti per i parametri riportati di seguito.

| **Parametro** | **Richiesto** | **Note** |
|----|:----:|----|
|**SubscriptionId**|✔|SubscriptionID della sottoscrizione di Azure che contiene le risorse che si desidera analizzare.|
|**ResourceGroupName**|✔|Nome del gruppo di risorse. Usare qualsiasi gruppo di risorse esistente, incluso il valore predefinito ("DefaultResourceGroup-xxx"). Poiché la soluzione non è una risorsa di Azure, non sarà elencata nel gruppo di risorse, ma è ancora collegata.|
|**vaSolutionName**|✔|Nome della nuova soluzione.|
|**vaType**|✔|Qualys o Rapid7.|
|**licenceCode**|✔|Stringa di licenza fornita dal fornitore.|
|**publicKey**|✔|Chiave pubblica fornita dal fornitore.|
|**autoUpdate**|-|Abilitare (true) o disabilitare (false) la distribuzione automatica per questa soluzione VA. Se abilitata, ogni nuova VM nella sottoscrizione tenterà automaticamente di eseguire il collegamento alla soluzione.<br/>(Impostazione predefinita: false)|
||||

Sintassi:

```azurepowershell
.\New-ASCVASolution.ps1 -subscriptionId <Subscription Id> -resourceGroupName <RG Name>
-vaSolutionName <New solution name> -vaType <Qualys / Rapid7> -autoUpdate <true/false>
-licenceCode <License code from vendor> -publicKey <Public Key received from vendor>
```

Esempio (questo esempio non include i dettagli della licenza validi):

```azurepowershell
.\New-ASCVASolution.ps1 -subscriptionId 'f4cx1b69-dtgb-4ch6-6y6f-ea2e95373d3b' -resourceGroupName 'DefaultResourceGroup-WEU' -vaSolutionName 'QualysVa001' -vaType 'Qualys' -autoUpdate 'false' `
-licenceCode 'eyJjaWQiOiJkZDg5OTYzXe4iMTMzLWM4NTAtODM5FD2mZWM1N2Q3ZGU5MjgiLCJgbTYuOiIyMmM5NDg3MS1lNTVkLTQ1OGItYjhlMC03OTRhMmM3YWM1ZGQiLCJwd3NVcmwiOiJodHRwczovL3FhZ3B1YmxpYy1wMDEuaW50LnF1YWx5cy5jb20vQ2xvdSKJY6VudC8iLCJwd3NQb3J0IjoiNDQzIn0=' `
-publicKey 'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCOiOLXjOywMfLZIBGPZLwSocf1Q64GASLK9OHFEmanBl1nkJhZDrZ4YD5lM98fThYbAx1Rde2iYV1ze/wDlX4cIvFAyXuN7HbdkeIlBl6vWXEBZpUU17bOdJOUGolzEzNBhtxi/elEZLghq9Chmah82me/okGMIhJJsCiTtglVQIDAQAB'
```

## <a name="next-steps"></a>Passaggi successivi

> [!div class="nextstepaction"]
> [Correggere i risultati della soluzione di valutazione della vulnerabilità](remediate-vulnerability-findings-vm.md)


Il Centro sicurezza offre anche l'analisi delle vulnerabilità per:

- Database SQL: vedere [Esplorare i report di valutazione della vulnerabilità nel dashboard di valutazione della vulnerabilità](defender-for-sql-usage.md#explore-vulnerability-assessment-reports)
- Immagini di Azure Container Registry. vedere [usare Azure Defender per registri contenitori per analizzare le vulnerabilità delle immagini](defender-for-container-registries-usage.md)