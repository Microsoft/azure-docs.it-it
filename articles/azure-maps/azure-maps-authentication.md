---
title: 'Metodi di autenticazione : Mappe di Microsoft Azure'
description: In questo articolo verranno fornite informazioni su Azure Active Directory (Azure AD) e sull'autenticazione con chiave condivisa. Entrambi vengono utilizzati per i servizi di Microsoft Azure Maps.Both are used for Microsoft Azure Maps services. Informazioni su come ottenere la chiave di sottoscrizione di Azure Maps.Learn how to get Azure Maps subscription key.
author: philmea
ms.author: philmea
ms.date: 01/28/2020
ms.topic: conceptual
ms.service: azure-maps
services: azure-maps
manager: philmea
ms.custom: mvc
ms.openlocfilehash: 21d29cba85adfc147ec9deb6ab362a5da943bf10
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 03/28/2020
ms.locfileid: "80335709"
---
# <a name="authentication-with-azure-maps"></a>Autenticazione con Mappe di Azure

Mappe di Azure supporta due modi per autenticare le richieste: l'autenticazione con chiave condivisa e l'autenticazione di Azure Active Directory.Azure Maps supports two ways to authenticate requests: Shared Key authentication and Azure Active Directory authentication. Questo articolo illustra questi metodi di autenticazione per guidare l'implementazione dei servizi di Mappe di Azure.This article explains these authentication methods to help guide your implementation of Azure Maps services.

> [!NOTE]
> Per migliorare la comunicazione sicura con Azure Maps, è ora supportato Transport Layer Security (TLS) 1.2 e stiamo ritirando il supporto per TLS 1.0 e 1.1. Per evitare interruzioni del servizio, aggiornare i server e le **applicazioni in modo che utilizzino TLS 1.2 prima del 2 aprile 2020.**  Se attualmente si utilizza TLS 1.x, valutare la preparazione di TLS 1.2 e sviluppare un piano di migrazione con il test descritto in [Risoluzione del problema TLS 1.0](https://docs.microsoft.com/security/solving-tls1-problem).

## <a name="shared-key-authentication"></a>Autenticazione con chiave condivisa

 Le chiavi primarie e secondarie vengono generate dopo la creazione dell'account di Azure Maps.Primary and secondary keys are generated after the Azure Maps account is created. Si consiglia di usare la chiave primaria come chiave di sottoscrizione quando si chiama Azure Maps usando l'autenticazione con chiave condivisa. L'autenticazione con chiave condivisa passa una chiave generata da un account di Azure Maps a un servizio Mappe di Azure.Shared Key authentication passes a key generated by an Azure Maps account to an Azure Maps service. Per ogni richiesta ai servizi di Mappe di Azure, aggiungere la chiave di *sottoscrizione* come parametro all'URL. La chiave secondaria può essere utilizzata in scenari come le modifiche alla chiave in sequenza.  

Per informazioni sulla visualizzazione delle chiavi nel portale di Azure, vedere [Gestire l'autenticazione.](https://aka.ms/amauthdetails)

> [!Tip]
> È consigliabile rigenerare le chiavi regolarmente. Vengono forniti due tasti, in modo che sia possibile mantenere le connessioni con una chiave durante la rigenerazione dell'altra. Quando si rigenerano le chiavi, è necessario aggiornare tutte le applicazioni, che accedono all'account, con le nuove chiavi.

## <a name="authentication-with-azure-active-directory-preview"></a>Autenticazione con Azure Active Directory (anteprima)

Mappe di Azure offre ora richieste di autenticazione per i servizi di Mappe di Azure usando [Azure Active Directory (Azure AD).](https://docs.microsoft.com/azure/active-directory/fundamentals/active-directory-whatis) Azure AD fornisce l'autenticazione basata sull'identità, incluso [il controllo degli accessi in base](https://docs.microsoft.com/azure/role-based-access-control/overview)al ruolo. Il controllo degli accessi in base al ruolo viene usato per concedere l'accesso a livello di utente, di gruppo o a livello di applicazione alle risorse di Azure Maps.RBAC is used to grant user-level, group-level, or application-level access to Azure Maps resources. Le sezioni successive illustrano i concetti e i componenti dell'integrazione di Azure Maps con Azure AD.

## <a name="authentication-with-oauth-access-tokens"></a>Autenticazione con token di accesso OAuth

Mappe di Azure accetta token di accesso **OAuth 2.0** per i tenant di Azure AD associati a una sottoscrizione di Azure contenente un account di Mappe di Azure. Mappe di Azure accetta anche i token per:Azure Maps also accepts tokens for:

* Utenti di Azure ADAzure AD users
* Applicazioni partner che utilizzano autorizzazioni delegate dagli utenti
* Identità gestite per le risorse di Azure

Mappe di Azure genera un *identificatore univoco (ID client)* per ogni account Mappe di Azure. È possibile richiedere token da Azure AD quando si combina questo ID client con parametri aggiuntivi. Per richiedere un token, specificare i valori nella tabella seguente in base all'ambiente di Azure.To request a token, specify the values in the following table based on your Azure Environment.

| Ambiente Azure   | Endpoint token Azure ADAzure AD token endpoint |
| --------------------|-------------------------|
| Azure Public        | https://login.microsoftonline.com |
| Azure Government    | https://login.microsoftonline.us |


Per altre informazioni su come configurare Azure AD e richiedere i token per Mappe di Azure, vedere [Gestire l'autenticazione in Mappe di Azure](https://docs.microsoft.com/azure/azure-maps/how-to-manage-authentication).

Per informazioni generali su come richiedere token da Azure AD, vedere [Informazioni sull'autenticazione](https://docs.microsoft.com/azure/active-directory/develop/authentication-scenarios).

## <a name="request-azure-map-resources-with-oauth-tokens"></a>Richiedere risorse di Mappe di Azure con token OAuth

Dopo che Azure AD riceve un token, Azure Maps invia una richiesta con il set seguente di intestazioni di richiesta richieste:After Azure AD receives a token, Azure Maps sends a request with the following set of required request headers:

| Intestazione della richiesta    |    valore    |
|:------------------|:------------|
| x-ms-client-id    | 30d7cc….9f55|
| Autorizzazione     | Bearer eyJ0e….HNIVN |

> [!Note]
> `x-ms-client-id` è il GUID basato sull'account di Mappe di Azure che compare nella pagina di autenticazione di Mappe di Azure.

Ecco un esempio di instradamento delle richieste di Mappe di Azure che usa un token OAuth:

```
GET /route/directions/json?api-version=1.0&query=52.50931,13.42936:52.50274,13.43872 
Host: atlas.microsoft.com 
x-ms-client-id: 30d7cc….9f55 
Authorization: Bearer eyJ0e….HNIVN 
```

Per informazioni sulla visualizzazione dell'ID client, vedere [Visualizzare i dettagli di autenticazione](https://aka.ms/amauthdetails).

## <a name="control-access-with-rbac"></a>Controllare l'accesso con il controllo degli accessi in base al ruolo

In Azure AD usare il controllo degli accessi in base al ruolo per controllare l'accesso alle risorse protette. Configurare l'account di Azure Maps e registrare il tenant di Azure Maps di Azure Azure Azure AD. Mappe di Azure supporta il controllo dell'accesso in lettura per singoli utenti, gruppi, applicazioni, risorse di Azure e servizi di Azure tramite identità gestite per le risorse di Azure.Azure Maps supports read access control for individual Azure AD users, groups, applications, Azure resources, and Azure services via managed identities for Azure resources. Nella pagina del portale di Mappe di Azure è possibile configurare il controllo degli accessi in base al ruolo per i ruoli scelti.

![Lettore di dati per Mappe di Azure (anteprima)](./media/azure-maps-authentication/concept.png)

Per informazioni su come visualizzare le impostazioni del controllo degli accessi in base al ruolo, vedere [Come configurare il controllo degli accessi in base al ruolo per Mappe di Azure](https://aka.ms/amrbac).

## <a name="managed-identities-for-azure-resources-and-azure-maps"></a>Identità gestite per risorse di Azure e Mappe di Azure

[Le identità gestite per le risorse](https://docs.microsoft.com/azure/active-directory/managed-identities-azure-resources/overview) di Azure forniscono ai servizi di Azure un'identità gestita automaticamente, che può essere autorizzata ad accedere ai servizi di Azure Maps.Managed identities for Azure resources provide Azure services with an automatically managed identity, which can be authorized to access Azure Maps services. Alcuni esempi di identità gestite includono: Servizio app di Azure, Funzioni di Azure e Macchine virtuali di Azure.Some examples of managed identities, include: Azure App Service, Azure Functions, and Azure Virtual Machines.

## <a name="next-steps"></a>Passaggi successivi

* Per altre informazioni sull'autenticazione di un'applicazione con Azure AD e Mappe di Azure, vedere [Gestire l'autenticazione in Mappe di Azure](https://docs.microsoft.com/azure/azure-maps/how-to-manage-authentication).

* Per altre informazioni sull'autenticazione del controllo mappa di Mappe di Azure e di Azure AD, vedere [Usare il controllo mappa di Mappe di Azure](https://aka.ms/amaadmc).
